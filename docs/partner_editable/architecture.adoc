Deploying this Quick Start for a new virtual private cloud (VPC) with
default parameters builds the following {partner-product-short-name} environment in the AWS Cloud.

:xrefstyle: short
[#architecture1]
.Quick Start architecture for {partner-product-short-name} on AWS
image::../images/duo-mfa-architecture_diagram.png[Architecture]

As shown in <<architecture1>>, the Quick Start sets up the following:

* A highly available architecture that spans two Availability Zones.*
* A VPC configured with public and private subnets, according to AWS
best practices, to provide you with your own virtual network on AWS.* 
* In the public subnets, managed network address translation (NAT) gateways to allow outbound
internet access for resources in the private subnets.*
* In the private subnets, [____?]
//TODO Dave, Is Fargate in them? If not, what to say for the previous bullet?
* In the VPC [or is it in the private subnets?], Fargate containers for Duo Authentication Proxy in a [security?] group scale workloads up or down, as determined by Amazon CloudWatch CPU and memory alarms.
//TODO Dave, Since the Auto Scaling group is no longer in the diagram, what's accurate to say about auto scaling? 
//TODO Dave, was the original dotted-line box around Fargate meant to be a security group? Presuming so, what to say about it (in the Fargate bullet)?
//TODO Dave, Should we show (or label) "containers" in the diagram, or does the Fargate icon itself represent them?
* A CI/CD pipeline that works as follows: In response to an CloudWatch scheduled event, AWS CodePipeline retrieves a container from AWS CodeCommit. Next, CodePipeline builds the container with AWS CodeBuild. Finally, CodePipeline pushes the image to Amazon Elastic Container Registry (Amazon ECR). 
//TODO Dave, Is this pipeline description (& depiction in the diagram) accurate?
//TODO Dave, What kind of "scheduled event" are we talking about?
* Amazon ECR to rebuild the ECR image [?].
//TODO Dave, How to describe ECR, incl. the arrow from ECR to Fargate?
* An Amazon Simple Notification Service (Amazon SNS) topic to notify the administrator when the Fargate containers scale, when a new container is built, or when a container build fails. These notifications are invoked by CloudWatch CPU and memory alarms.
//TODO Dave, Is the previous bullet accurate?
* Secrets and events management:
//TODO Dave, I'm making a guess at the group box & nested bullets. Do they make sense?
** AWS Secrets Manager to store and rotate secrets regularly.
** An AWS Lambda function to replace the Fargate containers when secrets are rotated.
** A second Lambda function to update the Duo MFA settings in Systems Manager Parameter Store, which stores Fargate container IP addresses. This function is initiated by a CloudWatch event when the updated Fargate containers stabilize.
** A third Lambda function to either update the RADIUS settings in AWS Directory Service or, if the update fails, send an Amazon SNS notification. This function is initiated by a CloudWatch event when the Duo MFA settings are updated.
//TODO Dave, How does the SNS "topic" factor in to the previous bullet?
** An AWS Directory Service managed directory to store the updated IP addresses of Fargate containers when the containers are stabilized.
* An AWS Key Management Service (AWS KMS) key to encrypt all Duo Authentication Proxyâ€“related resources.
//TODO Dave, Where does Amazon Elastic Container Service (Amazon ECS) fit in? We mention "the ECS cluster" several times later. (I'll spell it out on first use.)
//TODO Dave, Do we have an Auto Scaling group? We mention it in the post-deployment steps.
//TODO Dave, We mention in the code "Duo ECS service Application Auto Scaling" for CPU and for memory. How does that fit in?

[.small]#*The template that deploys the Quick Start into an existing VPC skips the components marked by asterisks and prompts you for your existing VPC configuration.#