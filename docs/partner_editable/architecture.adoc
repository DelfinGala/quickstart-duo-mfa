Deploying this Quick Start for a new virtual private cloud (VPC) with
default parameters builds the following {partner-product-short-name} environment in the AWS Cloud.

:xrefstyle: short
[#architecture1]
.Quick Start architecture for {partner-product-short-name} on AWS
image::../images/duo-mfa-architecture_diagram.png[Architecture]

As shown in <<architecture1>>, the Quick Start sets up the following:

* A highly available architecture that spans two Availability Zones.*
* A VPC configured with public and private subnets, according to AWS
best practices, to provide you with your own virtual network on AWS.* 
* In the public subnets, managed network address translation (NAT) gateways to allow outbound
internet access for resources in the private subnets.*
* In the private subnets, a serverless managed AWS Fargate cluster in a security group (not shown?). These are containers for Duo Authentication Proxy. 
//TODO Marcia to rephrase the above bullet: "scale workloads up or down, as determined by Amazon CloudWatch CPU and memory alarms"?
//TODO Marcia: See my Slack message to Dave re: whether to show a security group box instead of generic box. 
//TODO Marcia to recast all these bullets per 5/28 meeting with Dave.
//TODO Marcia, Wherever Amazon Elastic Container Service (Amazon ECS) fits in (or maybe "ECS cluster," as mentioned several times later), spell it out on first use.
* A CI/CD pipeline that works as follows: In response to an CloudWatch scheduled event, AWS CodePipeline retrieves a container from AWS CodeCommit. Next, CodePipeline builds the container with AWS CodeBuild. Finally, CodePipeline pushes the [container?] image to Amazon Elastic Container Registry (Amazon ECR). 
* Amazon ECR to rebuild the ECR [container?] image [____?].
* An Amazon Simple Notification Service (Amazon SNS) topic to notify the administrator when the Fargate containers scale, when a new container is built, or when a container build fails. These notifications are invoked by CloudWatch CPU and memory alarms.
* Secrets and events management:
** AWS Secrets Manager to store and rotate secrets regularly.
** An AWS Lambda function to replace the Fargate containers when secrets are rotated.
** A second Lambda function to update the Duo MFA settings in Systems Manager Parameter Store, which stores Fargate container IP addresses. This function is initiated by a CloudWatch event when the updated Fargate containers stabilize.
** A third Lambda function to either update the RADIUS settings in AWS Directory Service or, if the update fails, send an Amazon SNS notification. This function is initiated by a CloudWatch event when the Duo MFA settings are updated.
** An AWS Directory Service managed directory to store the updated IP addresses of Fargate containers when the containers are stabilized.
* An AWS Key Management Service (AWS KMS) key to encrypt all Duo Authentication Proxyâ€“related resources.

[.small]#*The template that deploys the Quick Start into an existing VPC skips the components marked by asterisks and prompts you for your existing VPC configuration.#